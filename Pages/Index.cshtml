@page
@model IndexModel
@using System.Net.Http.Headers
@using WhatsappBusiness.CloudApi
@using WhatsappBusiness.CloudApi.Configurations
@using WhatsappBusiness.CloudApi.Interfaces
@{
    ViewData["Title"] = "Home page";

    //TOKEN
    string token = "EAAZARhojOiiYBO07LPD7h1LfKFUzoBFNL7J1kufrQkhm7kI7W2WFoZAkperPJf5wEv1SpZASOOLIheHlyw7XFNHZCOL8NeriWmA9rRE7POHEritoJlsagB8yZAKcL61D9XY6nub1KrSbtcJsqfzfWqHcZBEdMg2fxgrBSMXavP4hiE9zv2BHSAE2WqghKcfY0zd4oj2VuWRB7F9q3rEZBjvodxOcRQZD";

    //TELEFONO API
    string idTelfono = "478683361989255";

    //TELEFONO A ENVIAR
    string telefono = "526442260935";

    HttpClient client = new HttpClient();



    HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Post, "https://graph.facebook.com/v15.0/" + idTelfono + "/messages");

    request.Headers.Add("Authorization", "Bearer " + token);

    request.Content = new StringContent("{ \"messaging_product\": \"whatsapp\", \"to\": \"" + telefono + "\", \"type\": \"template\", \"template\": { \"name\": \"hello_world\", \"language\": { \"code\": \"en_US\" } } }");
    request.Content.Headers.ContentType = new MediaTypeHeaderValue("application/json");

    HttpResponseMessage response = await client.SendAsync(request);
    //response.EnsureSuccessStatusCode();
    string responseBody = await response.Content.ReadAsStringAsync();    

}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
    <textarea></textarea>
</div>
